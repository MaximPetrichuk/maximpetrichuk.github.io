(this.webpackJsonpeblock=this.webpackJsonpeblock||[]).push([[0],{441:function(e,t,n){},453:function(e,t){},454:function(e,t){},462:function(e,t){},465:function(e,t){},466:function(e,t){},467:function(e,t,n){},598:function(e,t,n){"use strict";n.r(t);var a=n(23),i=n(9),r=n.n(i),o=n(225),s=n.n(o),c=(n(441),n(81)),l=n(126),u=n(6),d=n(600),_=n(273),p=n(274),b=n(279),j=n(604),m=n(272),v=n(606),h=n(408),f=n(143),O=(n(444),n(199)),x=n.n(O),k=n(377),y=n.n(k),g=(n(445),n(378)),S=n.n(g),M=function(e){var t=e.setEbFact,n=Object(i.useState)(null),r=Object(u.a)(n,2),o=r[0],s=r[1],c=HTMLDivElement,l={tableOverflow:!0,data:[["2021-01-29",2160,0],["2021-01-30",2159,0],["2021-01-31",2159,0],["2021-02-01",2158,5],["2021-02-02",2157,24],["2021-02-03",2156,60],["2021-02-04",2156,111],["2021-02-05",2155,167],["2021-02-06",2154,221],["2021-02-07",2154,271],["2021-02-08",2153,313],["2021-02-09",2152,346],["2021-02-10",2151,372],["2021-02-11",2151,392],["2021-02-12",2150,406],["2021-02-13",2149,415],["2021-02-14",2149,420],["2021-02-15",2148,422],["2021-02-16",2147,421],["2021-02-17",2147,420],["2021-02-18",2146,416],["2021-02-19",2145,411],["2021-02-20",2144,406],["2021-02-21",2144,400],["2021-02-22",2143,393],["2021-02-23",2142,387],["2021-02-24",2142,380],["2021-02-25",2141,374],["2021-02-26",2140,367],["2021-02-27",2140,360],["2021-02-28",2139,354],["2021-03-01",2138,348],["2021-03-02",2137,341],["2021-03-03",2137,336],["2021-03-04",2136,330],["2021-03-05",2135,324],["2021-03-06",2135,319],["2021-03-07",2134,314],["2021-03-08",2133,309],["2021-03-09",2132,305],["2021-03-10",2132,300],["2021-03-11",2131,296],["2021-03-12",2130,292],["2021-03-13",2130,288],["2021-03-14",2129,284],["2021-03-15",2128,280],["2021-03-16",2128,277],["2021-03-17",2127,274],["2021-03-18",2126,271],["2021-03-19",2125,268],["2021-03-20",2125,265],["2021-03-21",2124,262],["2021-03-22",2123,259],["2021-03-23",2123,257],["2021-03-24",2122,255],["2021-03-25",2121,253],["2021-03-26",2121,250],["2021-03-27",2120,249],["2021-03-28",2119,246],["2021-03-29",2119,245],["2021-03-30",2118,243],["2021-03-31",2117,241],["2021-04-01",2116,240],["2021-04-02",2116,238],["2021-04-03",2115,237],["2021-04-04",2114,235],["2021-04-05",2114,234],["2021-04-06",2113,233],["2021-04-07",2112,231],["2021-04-08",2112,230],["2021-04-09",2111,229],["2021-04-10",2110,228],["2021-04-11",2109,227],["2021-04-12",2109,226],["2021-04-13",2108,225],["2021-04-14",2107,224],["2021-04-15",2107,223],["2021-04-16",2106,223],["2021-04-17",2105,222],["2021-04-18",2105,221],["2021-04-19",2104,221],["2021-04-20",2103,220],["2021-04-21",2103,219],["2021-04-22",2102,218],["2021-04-23",2101,218],["2021-04-24",2100,218],["2021-04-25",2100,217],["2021-04-26",2099,216],["2021-04-27",2098,216],["2021-04-28",2098,216],["2021-04-29",2097,215],["2021-04-30",2096,215],["2021-05-01",2096,214],["2021-05-02",2095,214],["2021-05-03",2094,214],["2021-05-04",2094,213],["2021-05-05",2093,213],["2021-05-06",2092,213],["2021-05-07",2092,213],["2021-05-08",2091,212],["2021-05-09",2090,212],["2021-05-10",2089,212],["2021-05-11",2089,212],["2021-05-12",2088,212],["2021-05-13",2087,211],["2021-05-14",2087,211],["2021-05-15",2086,211],["2021-05-16",2085,211],["2021-05-17",2085,211],["2021-05-18",2084,211],["2021-05-19",2083,210],["2021-05-20",2083,210],["2021-05-21",2082,210],["2021-05-22",2081,210],["2021-05-23",2081,210],["2021-05-24",2080,210],["2021-05-25",2079,210],["2021-05-26",2078,210],["2021-05-27",2078,209],["2021-05-28",2077,210],["2021-05-29",2076,209],["2021-05-30",2076,209],["2021-05-31",2075,209],["2021-06-01",2074,210],["2021-06-02",2074,209],["2021-06-03",2073,209],["2021-06-04",2072,209],["2021-06-05",2072,209],["2021-06-06",2071,209],["2021-06-07",2070,209],["2021-06-08",2070,209],["2021-06-09",2069,209],["2021-06-10",2068,209],["2021-06-11",2068,209],["2021-06-12",2067,209],["2021-06-13",2066,209],["2021-06-14",2066,209],["2021-06-15",2065,209],["2021-06-16",2064,209],["2021-06-17",2064,209],["2021-06-18",2063,209],["2021-06-19",2062,209],["2021-06-20",2061,209],["2021-06-21",2061,209],["2021-06-22",2060,209],["2021-06-23",2059,209],["2021-06-24",2059,209],["2021-06-25",2058,209],["2021-06-26",2057,209],["2021-06-27",2057,208],["2021-06-28",2056,209],["2021-06-29",2055,209],["2021-06-30",2055,209],["2021-07-01",2054,208],["2021-07-02",2053,209],["2021-07-03",2053,208],["2021-07-04",2052,208],["2021-07-05",2051,208],["2021-07-06",2051,208],["2021-07-07",2050,208],["2021-07-08",2049,208],["2021-07-09",2049,208],["2021-07-10",2048,208],["2021-07-11",2047,208],["2021-07-12",2047,208],["2021-07-13",2046,208],["2021-07-14",2045,208],["2021-07-15",2045,208],["2021-07-16",2044,208],["2021-07-17",2043,208],["2021-07-18",2043,208],["2021-07-19",2042,207],["2021-07-20",2041,208],["2021-07-21",2041,207],["2021-07-22",2040,207],["2021-07-23",2039,207],["2021-07-24",2039,207],["2021-07-25",2038,207],["2021-07-26",2037,207],["2021-07-27",2037,207],["2021-07-28",2036,207],["2021-07-29",2035,207],["2021-07-30",2035,206],["2021-07-31",2034,206],["2021-08-01",2033,206],["2021-08-02",2033,206],["2021-08-03",2032,206],["2021-08-04",2031,206],["2021-08-05",2031,206],["2021-08-06",2030,206],["2021-08-07",2029,206],["2021-08-08",2029,205],["2021-08-09",2028,205],["2021-08-10",2027,205],["2021-08-11",2027,205],["2021-08-12",2026,205],["2021-08-13",2025,205],["2021-08-14",2025,204],["2021-08-15",2024,204],["2021-08-16",2023,204],["2021-08-17",2023,204],["2021-08-18",2022,204],["2021-08-19",2021,204],["2021-08-20",2021,203],["2021-08-21",2020,203],["2021-08-22",2019,203],["2021-08-23",2019,203],["2021-08-24",2018,202],["2021-08-25",2017,203],["2021-08-26",2017,202],["2021-08-27",2016,202],["2021-08-28",2015,202],["2021-08-29",2015,201],["2021-08-30",2014,201],["2021-08-31",2013,201],["2021-09-01",2013,201],["2021-09-02",2012,200],["2021-09-03",2011,201],["2021-09-04",2011,200],["2021-09-05",2010,200],["2021-09-06",2009,200],["2021-09-07",2009,199],["2021-09-08",2008,199],["2021-09-09",2007,199],["2021-09-10",2007,198],["2021-09-11",2006,198],["2021-09-12",2005,198],["2021-09-13",2005,198],["2021-09-14",2004,197],["2021-09-15",2003,197],["2021-09-16",2003,197],["2021-09-17",2002,197],["2021-09-18",2001,196],["2021-09-19",2001,196],["2021-09-20",2e3,195],["2021-09-21",1999,195],["2021-09-22",1999,195],["2021-09-23",1998,194],["2021-09-24",1997,194],["2021-09-25",1997,194],["2021-09-26",1996,194],["2021-09-27",1995,193],["2021-09-28",1995,193],["2021-09-29",1994,192],["2021-09-30",1993,192],["2021-10-01",1993,192],["2021-10-02",1992,191],["2021-10-03",1992,191],["2021-10-04",1991,191],["2021-10-05",1990,190],["2021-10-06",1990,190],["2021-10-07",1989,190],["2021-10-08",1988,189],["2021-10-09",1988,189],["2021-10-10",1987,188],["2021-10-11",1986,188],["2021-10-12",1986,188],["2021-10-13",1985,187],["2021-10-14",1984,187],["2021-10-15",1984,186],["2021-10-16",1983,186],["2021-10-17",1982,186],["2021-10-18",1982,185],["2021-10-19",1981,185],["2021-10-20",1980,184],["2021-10-21",1980,184],["2021-10-22",1979,184],["2021-10-23",1978,183],["2021-10-24",1978,182],["2021-10-25",1977,182],["2021-10-26",1977,182],["2021-10-27",1976,181],["2021-10-28",1975,181],["2021-10-29",1975,181],["2021-10-30",1974,180],["2021-10-31",1973,179],["2021-11-01",1973,179],["2021-11-02",1972,178],["2021-11-03",1971,178],["2021-11-04",1971,178],["2021-11-05",1970,177],["2021-11-06",1969,177],["2021-11-07",1969,176],["2021-11-08",1968,176],["2021-11-09",1967,175],["2021-11-10",1967,175],["2021-11-11",1966,174],["2021-11-12",1965,174],["2021-11-13",1965,173],["2021-11-14",1964,173],["2021-11-15",1964,172],["2021-11-16",1963,172],["2021-11-17",1962,171],["2021-11-18",1962,171],["2021-11-19",1961,170],["2021-11-20",1960,170],["2021-11-21",1960,169],["2021-11-22",1959,169],["2021-11-23",1958,168],["2021-11-24",1958,168],["2021-11-25",1957,167],["2021-11-26",1956,167],["2021-11-27",1956,166],["2021-11-28",1955,166],["2021-11-29",1955,165],["2021-11-30",1954,165],["2021-12-01",1953,164],["2021-12-02",1953,164],["2021-12-03",1952,163],["2021-12-04",1951,163],["2021-12-05",1951,162],["2021-12-06",1950,162],["2021-12-07",1949,161],["2021-12-08",1949,160],["2021-12-09",1948,160],["2021-12-10",1947,159],["2021-12-11",1947,159],["2021-12-12",1946,158],["2021-12-13",1946,158],["2021-12-14",1945,157],["2021-12-15",1944,157],["2021-12-16",1944,156],["2021-12-17",1943,156],["2021-12-18",1942,155],["2021-12-19",1942,155],["2021-12-20",1941,154],["2021-12-21",1940,153],["2021-12-22",1940,153],["2021-12-23",1939,152],["2021-12-24",1939,152],["2021-12-25",1938,151],["2021-12-26",1937,151],["2021-12-27",1937,150],["2021-12-28",1936,150],["2021-12-29",1935,149],["2021-12-30",1935,149],["2021-12-31",1934,148],["2022-01-01",1933,147],["2022-01-02",1933,147],["2022-01-03",1932,146],["2022-01-04",1932,146],["2022-01-05",1931,145],["2022-01-06",1930,145],["2022-01-07",1930,144],["2022-01-08",1929,144],["2022-01-09",1928,143],["2022-01-10",1928,142],["2022-01-11",1927,142],["2022-01-12",1926,141],["2022-01-13",1926,141],["2022-01-14",1925,140],["2022-01-15",1925,140],["2022-01-16",1924,139],["2022-01-17",1923,139],["2022-01-18",1923,138],["2022-01-19",1922,138],["2022-01-20",1921,137],["2022-01-21",1921,136],["2022-01-22",1920,136],["2022-01-23",1920,135],["2022-01-24",1919,135],["2022-01-25",1918,134],["2022-01-26",1918,134],["2022-01-27",1917,133],["2022-01-28",1916,133],["2022-01-29",1916,132],["2022-01-30",1915,131],["2022-01-31",1914,131],["2022-02-01",1914,130],["2022-02-02",1913,130],["2022-02-03",1913,129],["2022-02-04",1912,129],["2022-02-05",1911,128],["2022-02-06",1911,127],["2022-02-07",1910,127],["2022-02-08",1909,126],["2022-02-09",1909,126],["2022-02-10",1908,125],["2022-02-11",1908,125],["2022-02-12",1907,124],["2022-02-13",1906,124],["2022-02-14",1906,123],["2022-02-15",1905,123],["2022-02-16",1904,122],["2022-02-17",1904,121],["2022-02-18",1903,121],["2022-02-19",1903,120],["2022-02-20",1902,120],["2022-02-21",1901,119],["2022-02-22",1901,119],["2022-02-23",1900,118],["2022-02-24",1899,118],["2022-02-25",1899,117],["2022-02-26",1898,117],["2022-02-27",1898,116],["2022-02-28",1897,116],["2022-03-01",1896,115],["2022-03-02",1896,114],["2022-03-03",1895,114],["2022-03-04",1894,113],["2022-03-05",1894,113],["2022-03-06",1893,112],["2022-03-07",1893,112],["2022-03-08",1892,111],["2022-03-09",1891,111],["2022-03-10",1891,110],["2022-03-11",1890,110],["2022-03-12",1889,109],["2022-03-13",1889,109],["2022-03-14",1888,108],["2022-03-15",1888,108],["2022-03-16",1887,107],["2022-03-17",1886,107],["2022-03-18",1886,106],["2022-03-19",1885,106],["2022-03-20",1884,105],["2022-03-21",1884,105],["2022-03-22",1883,104],["2022-03-23",1883,104],["2022-03-24",1882,103],["2022-03-25",1881,103],["2022-03-26",1881,102],["2022-03-27",1880,102],["2022-03-28",1880,101],["2022-03-29",1879,101],["2022-03-30",1878,100],["2022-03-31",1878,100],["2022-04-01",1877,99],["2022-04-02",1876,99],["2022-04-03",1876,98],["2022-04-04",1875,98],["2022-04-05",1875,97],["2022-04-06",1874,97],["2022-04-07",1873,96],["2022-04-08",1873,96],["2022-04-09",1872,95],["2022-04-10",1872,95],["2022-04-11",1871,94],["2022-04-12",1870,94],["2022-04-13",1870,93],["2022-04-14",1869,93],["2022-04-15",1868,92],["2022-04-16",1868,92],["2022-04-17",1867,92],["2022-04-18",1866,91]],columns:[{type:"text",width:"80",name:"date",title:"\u0414\u0430\u0442\u0430"},{type:"number",width:"110",name:"vol_pr",title:"\u041e\u0431\u044a\u0435\u043c \u041f\u0420 (\u043c3)"},{type:"number",width:"180",name:"sod_me_pr",title:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0432 \u041f\u0420 (\u043c\u0433/\u043b)"}]};Object(i.useEffect)((function(){s(S()(c,l))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{ref:function(e){return c=e}}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"button",onClick:function(){x.a.extend(y.a),t(o.getData().map((function(e){return{date:x()(e[0],x()(e[0],"DD.MM.YYYY").isValid()?"DD.MM.YYYY":"YYYY-MM-DD").format("YYYY-MM-DD"),vol_pr:Number(e[1]),sod_me_pr:Number(e[2])}})))},value:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0430\u043a\u0442"}),Object(a.jsx)("input",{type:"button",onClick:function(){o.setData([[],[],[],[],[],[],[],[],[],[],[],[]])},value:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443"})]}),Object(a.jsx)("p",{children:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u044f\u0447\u0435\u0439\u043a\u0443 \u0438 \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e CTRL-V."})]})},w=n(90),A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",i=[],r=x()(t),o=1e3*e.me_calc/e.grm,s=1e3*e.me,c=0,l=e.skv_otk,u=e.skv_otk_deb,d=0,_=0,p=0,b=0,j=0,m=0,v=0;do{var h={id:c+1,date:r.add(c,a).format("YYYY-MM-DD"),days:1,hours:24,vol_pr:0,vol_pr_nakop:0,jt:0,gr_t_grm_nakop:0,sod_me_pr:0,me_pr:0,me_pr_nakop:0,me_vr:0,me_final:0,me_final_nakop:0,k_izvl:0,vol_pr_f:null,sod_me_pr_f:null,me_pr_f:null,me_pr_nakop_f:null,me_vr_f:null,me_final_f:null,me_final_nakop_f:null,k_izvl_f:null};if(h.skv_otk=l,h.skv_otk_deb=u,c<=n.length-1?(h.date=n[c].date,h.vol_pr=n[c].vol_pr,h.vol_pr_f=n[c].vol_pr,h.sod_me_pr_f=n[c].sod_me_pr,h.me_pr_f=h.sod_me_pr_f&&h.sod_me_pr_f?h.sod_me_pr_f*h.vol_pr_f/1e3:0,h.me_pr_nakop_f=j+h.me_pr_f,h.me_vr_f=e.sod_me_vr*h.vol_pr_f/1e3,h.me_vr_f>h.me_pr_f&&(h.me_vr_f=h.me_pr_f),h.me_final_f=h.me_pr_f-h.me_vr_f,h.me_final_nakop_f=m+h.me_final_f,h.k_izvl_f=w.round(h.me_final_nakop_f/s,4)):h.vol_pr=w.round(h.hours*h.skv_otk*h.skv_otk_deb),h.vol_pr>0){h.vol_pr_nakop=d+h.vol_pr,h.jt=w.round(h.vol_pr_nakop/e.grm,5);var f=-e.v*(h.jt-e.d/h.jt);if(h.gr_t_grm_nakop=o/(1+e.a*Math.exp(f)),h.sod_me_pr=w.round((h.gr_t_grm_nakop-_)*e.grm/(h.vol_pr/1e3),3),h.me_pr=h.sod_me_pr*h.vol_pr/1e3,h.me_pr_nakop=p+h.me_pr,h.me_vr=e.sod_me_vr*h.vol_pr/1e3,h.me_vr>h.me_pr&&(h.me_vr=h.me_pr),h.me_final=h.me_pr-h.me_vr,h.me_final_nakop=b+h.me_final,h.k_izvl=w.round(h.me_final_nakop/s,4),h.k_izvl>e.k_izvl){var O=h.k_izvl-e.k_izvl;h.k_izvl=e.k_izvl,h.me_final=s*h.k_izvl-b,h.me_final_nakop=b+h.me_final,h.vol_pr=w.round(h.vol_pr-h.vol_pr*O),h.vol_pr_nakop=d+h.vol_pr,h.jt=w.round(h.vol_pr_nakop/e.grm,3),h.me_pr=h.sod_me_pr*h.vol_pr/1e3,h.me_pr_nakop=p+h.me_pr,h.me_vr=h.me_pr-h.me_final}}else h.vol_pr_nakop=d,h.gr_t_grm_nakop=_,h.me_pr_nakop=p,h.me_final_nakop=b,h.k_izvl=w.round(h.me_final_nakop/s,4);l-=l*(1-e.koeff_year_um_skv)/365,u-=u*(1-e.koeff_year_um_deb)/365,d=h.vol_pr_nakop,_=h.gr_t_grm_nakop,p=h.me_pr_nakop,b=h.me_final_nakop,j=h.me_pr_nakop_f,m=h.me_final_nakop_f,v=h.k_izvl,i.push(h),c++}while(v<e.k_izvl&&c<1200);return i},N=n(3),z=n.n(N),C=n(13),Y=n(5),D=n(11),E=n(14),K=n(15),I=n(70),V=n(21),B=function(e){Object(E.a)(n,e);var t=Object(K.a)(n);function n(e,a,i,r,o){var s,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001;return Object(Y.a)(this,n),(s=t.call(this)).f=function(e){return I.d((function(){var t=e.mul(s.inputMax.sub(s.inputMin)).add(s.inputMin).div(s.grm),n=s.me.mul(1e3).div(s.grm),a=s.v.mul(t.sub(s.d.div(t))).mul(-1).exp();return n.div(s.constOne.add(s.a.mul(a))).mul(s.grm).div(1e3).sub(s.outputMin).div(s.outputMax.sub(s.outputMin))}))},s.meStart=e,s.grmStart=a,s.aStart=i,s.vStart=r,s.dStart=o,s.maxEpochPerTrainSession=c,s.learningRate=l,s.expectedLoss=u,s.optimizerFunction=I.e.sgd,s.initModelVariables(),s}return Object(D.a)(n,[{key:"initModelVariables",value:function(){this.a=I.b(this.aStart).variable(),this.v=I.b(this.vStart).variable(),this.d=I.b(this.dStart).variable(),this.grm=I.b(this.grmStart),this.me=I.b(this.meStart),this.constOne=I.b(1),this.constTen=I.b(10)}},{key:"predict",value:function(e,t){var n=I.c(e);return this.f(n).arraySync().map((function(n,a){return{date:a,vol:e[a],k_izvl_et:t[a],k_izvl_calc:n}}))}},{key:"predictAvd",value:function(){return{a:this.a.dataSync()[0],v:this.v.dataSync()[0],d:this.d.dataSync()[0],grm:this.grm.dataSync()[0],me:this.me.dataSync()[0]}}}]),n}(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.e.sgd,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;Object(Y.a)(this,e),this.loss=function(e,n){var a=e.sub(n).square().mean().sqrt();return t.lossVal=a.dataSync()[0],a},this.optimizerFunction=n,this.expectedLoss=r,this.learningRate=i,this.maxEpochPerTrainSession=a,this.trainSession=0,this.epochNumber=0,this.history=[]}return Object(D.a)(e,[{key:"initModelVariables",value:function(){throw Error("Model variables should be defined")}},{key:"f",value:function(){throw Error("Model should be defined")}},{key:"train",value:function(){var e=Object(C.a)(z.a.mark((function e(t,n,a){var i,r,o,s,c,l,u=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=++this.trainSession,this.lossVal=Number.POSITIVE_INFINITY,this.epochNumber=0,this.history=[],r=I.c(t),o=I.c(n),this.inputMax=r.max(),this.inputMin=I.b(0),this.outputMax=o.max(),this.outputMin=I.b(0),s=r.sub(this.inputMin).div(this.inputMax.sub(this.inputMin)),c=o.sub(this.outputMin).div(this.outputMax.sub(this.outputMin)),l=this.optimizerFunction(this.learningRate);case 13:if(!(i===this.trainSession&&this.lossVal>this.expectedLoss&&this.epochNumber<=this.maxEpochPerTrainSession)){e.next=22;break}return l.minimize((function(){return u.loss(u.f(s),c)})),this.history=[].concat(Object(V.a)(this.history),[{epoch:this.epochNumber,loss:this.lossVal}]),a&&a(),this.epochNumber++,e.next=20,I.a();case 20:e.next=13;break;case 22:s.dispose(),r.dispose(),o.dispose();case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.trainSession++}},{key:"predict",value:function(e){var t=I.c(e);return this.f(t).arraySync().map((function(t,n){return{x:e[n],y:t}}))}}]),e}()),T=null;function F(){return(F=Object(C.a)(z.a.mark((function e(t,n,a,i){var r,o,s,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=L(r=t,n),s=o.map((function(e){return e.vol_pr_nakop})),c=o.map((function(e){return e.me_final_nakop})),3e3,T=new B(1e3*r.me,r.grm,r.a,r.v,r.d,3e3,.1,.001),30,T.train(s,c,(function(){T.epochNumber%30===0&&i(parseInt(T.epochNumber/T.maxEpochPerTrainSession*100))})).then((function(){i(0);var e=T.predictAvd();a({a:w.round(e.a,4),v:w.round(e.v,4),d:w.round(e.d,4)})}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){for(var n=[],a=0,i=0,r=0;r<t.length;r++)a+=t[r].vol_pr,i+=t[r].vol_pr*t[r].sod_me_pr/1e3,n.push({vol_pr_nakop:a,me_final_nakop:i});return n}n(467);var P=function(e){var t=e.data,n=Object(i.useRef)(),r=Object(i.useState)({width:0,height:0}),o=Object(u.a)(r,2),s=o[0],c=o[1];return Object(i.useLayoutEffect)((function(){n.current&&c({width:n.current.offsetWidth,height:n.current.offsetHeight})}),[]),Object(a.jsxs)("div",{className:"content-charts",ref:n,children:[Object(a.jsxs)(d.a,{width:s.width-40,height:350,data:t,margin:{top:5,right:10,left:10,bottom:0},children:[Object(a.jsx)(_.a,{dataKey:"date"}),Object(a.jsx)(p.a,{dataKey:"sod_me_pr",label:{value:"\u0421\u043e\u0434.\u041c\u0435 \u0432 \u041f\u0420 (\u043c\u0433/\u043b)",angle:-90,position:"insideLeft"},yAxisId:0}),Object(a.jsx)(p.a,{dataKey:"k_izvl",label:{value:"\u041a.\u0438\u0437\u0432\u043b",angle:-90,position:"insideRight"},yAxisId:1,orientation:"right"}),Object(a.jsx)(b.a,{isAnimationActive:!1}),Object(a.jsx)(j.a,{strokeDasharray:"3 3"}),Object(a.jsx)(m.a,{type:"linear",dataKey:"sod_me_pr",title:"\u0421\u043e\u0434.\u041c\u0435 \u043f\u043b\u0430\u043d",stroke:"blue",yAxisId:0,isAnimationActive:!1,dot:!1}),Object(a.jsx)(m.a,{type:"linear",dataKey:"k_izvl",title:"\u041a.\u0438\u0437\u0432\u043b \u043f\u043b\u0430\u043d",stroke:"purple",yAxisId:1,isAnimationActive:!1,dot:!1}),Object(a.jsx)(m.a,{type:"linear",dataKey:"k_izvl_f",title:"\u041a.\u0438\u0437\u0432\u043b \u0444\u0430\u043a\u0442",stroke:"#387908",yAxisId:1,isAnimationActive:!1,dot:!1}),Object(a.jsx)(m.a,{type:"linear",dataKey:"sod_me_pr_f",title:"\u0421\u043e\u0434.\u041c\u0435 \u0444\u0430\u043a\u0442",stroke:"red",yAxisId:0,isAnimationActive:!1,dot:!1})]}),Object(a.jsxs)(v.a,{width:s.width-40,height:100,data:t,margin:{top:0,right:10,left:10,bottom:5},children:[Object(a.jsxs)("defs",{children:[Object(a.jsxs)("linearGradient",{id:"colorP",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(a.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(a.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),Object(a.jsxs)("linearGradient",{id:"colorF",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(a.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),Object(a.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),Object(a.jsx)(_.a,{dataKey:"date",hide:"true"}),Object(a.jsx)(p.a,{dataKey:"vol_pr",label:{value:"\u041f\u0420 (\u043c3)",angle:-90,position:"insideLeft"},yAxisId:0}),Object(a.jsx)(p.a,{dataKey:"vol_pr",label:{value:"\u041f\u0420 (\u043c3)",angle:-90,position:"insideRight"},yAxisId:1,orientation:"right"}),Object(a.jsx)(b.a,{isAnimationActive:!1}),Object(a.jsx)(j.a,{strokeDasharray:"3 3"}),Object(a.jsx)(h.a,{type:"linear",dataKey:"vol_pr",yAxisId:0,stroke:"#8884d8",fillOpacity:1,fill:"url(#colorP)",isAnimationActive:!1,dot:!1}),Object(a.jsx)(h.a,{type:"linear",dataKey:"vol_pr_f",yAxisId:0,stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorF)",isAnimationActive:!1,dot:!1})]})]})},R=function(e){e.nameEb;var t=e.paramEb,n=Object(i.useState)(!0),r=Object(u.a)(n,2),o=r[0],s=r[1],d=Object(i.useState)(t),_=Object(u.a)(d,2),p=_[0],b=_[1],j=Object(i.useState)([]),m=Object(u.a)(j,2),v=m[0],h=m[1],O=Object(i.useState)([]),x=Object(u.a)(O,2),k=x[0],y=x[1],g=Object(i.useState)(0),S=Object(u.a)(g,2),w=S[0],N=S[1],z=function(){k.length>0?function(e,t,n,a){F.apply(this,arguments)}(p,k,C,N):alert("\u0414\u043b\u044f \u043f\u043e\u0434\u0431\u043e\u0440\u0430 AVd \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0444\u0430\u043a\u0442\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 <\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0444\u0430\u043a\u0442 \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a>!")},C=function(e){b(Object(l.a)(Object(l.a)({},p),{},{a:e.a,v:e.v,d:e.d})),s(!o)},Y=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;b(Object(l.a)(Object(l.a)({},p),{},Object(c.a)({},a,Number(n))))},D=function(e,t){var n=p[e]+t;n=Number(n.toFixed(5).replace(/0*$/,"").replace(/\.$/,".0")),b(Object(l.a)(Object(l.a)({},p),{},Object(c.a)({},e,n))),s(!o)};return Object(i.useEffect)((function(){var e=A(p,p.date_start,k);h(e)}),[o,k]),Object(a.jsxs)("div",{className:"content-flex",children:[Object(a.jsxs)("div",{className:"content-header",children:[Object(a.jsx)("h3",{children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0443\u0442\u043e\u0447\u043d\u043e\u0439 \u0434\u043e\u0431\u044b\u0447\u0438."}),Object(a.jsx)(P,{data:v})]}),Object(a.jsxs)("div",{className:"content-body",children:[Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"A:"}),Object(a.jsx)("input",{name:"a",type:"number",value:p.a,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("a",-.1)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("a",.1)},children:"+"})]}),Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"V:"}),Object(a.jsx)("input",{name:"v",type:"number",value:p.v,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("v",-.1)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("v",.1)},children:"+"})]}),Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"d:"}),Object(a.jsx)("input",{name:"d",type:"number",value:p.d,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("d",-.01)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return D("d",.01)},children:"+"})]}),Object(a.jsx)("span",{hidden:0!==w,children:Object(a.jsx)("button",{type:"button",onClick:function(){return z()},children:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c AVd"})}),Object(a.jsx)("span",{hidden:0===w,children:Object(a.jsx)("button",{type:"button",onClick:function(){T&&T.stop()},children:"\u041f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440 AVd"})}),Object(a.jsx)("span",{hidden:0===w,children:Object(a.jsx)("div",{className:"progressbar",children:Object(a.jsxs)("div",{style:{width:w.toString()+"%"},children:[w,"%"]})})})]}),Object(a.jsx)("div",{className:"content-h100",children:Object(a.jsxs)("div",{className:"content-layout",children:[Object(a.jsxs)("div",{className:"content-sidebar",children:[Object(a.jsx)("label",{children:"\u0417\u0430\u043f\u0430\u0441\u044b \u0442"}),Object(a.jsx)("input",{name:"me",type:"number",step:"1",value:p.me,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0413\u0420\u041c \u0442"}),Object(a.jsx)("input",{name:"grm",type:"number",step:"1",value:p.grm,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u041e\u0442\u043a.\u0441\u043a\u0432.\u0448\u0442"}),Object(a.jsx)("input",{name:"skv_otk",type:"number",step:"1",value:p.skv_otk,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0414\u0435\u0431\u0438\u0442 \u043e\u0442\u043a.\u0441\u043a\u0432 \u043c3/\u0447"}),Object(a.jsx)("input",{name:"skv_otk_deb",type:"number",step:"0.1",value:p.skv_otk_deb,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u041f\u043b\u0430\u043d\u043e\u0432\u044b\u0439 \u041a\u043e\u0435\u0444\u0444.\u0438\u0437\u0432\u043b."}),Object(a.jsx)("input",{name:"k_izvl",type:"number",step:"0.1",value:p.k_izvl,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0415\u0436\u0435\u0433\u043e\u0434\u043d.\u043a\u043e\u0435\u0444\u0444.\u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u0434\u0435\u0431\u0438\u0442\u0430."}),Object(a.jsx)("input",{name:"koeff_year_um_deb",type:"number",step:"0.1",value:p.koeff_year_um_deb,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0415\u0436\u0435\u0433\u043e\u0434\u043d.\u043a\u043e\u0435\u0444\u0444.\u0443\u043c\u0435\u043d\u044c\u0448.\u043a\u043e\u043b-\u0432\u0430 \u0441\u043a\u0432."}),Object(a.jsx)("input",{name:"koeff_year_um_skv",type:"number",step:"0.1",value:p.koeff_year_um_skv,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0421\u0440\u0435\u0434\u043d.\u0441\u043e\u0434\u0435\u0440\u0436.Me \u0432 \u0412\u0420 (\u043c\u0433/\u043b)"}),Object(a.jsx)("input",{name:"sod_me_vr",type:"number",step:"0.1",value:p.sod_me_vr,onChange:Y,onBlur:function(){return s(!o)}}),Object(a.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0431\u043b\u043e\u043a\u0430"}),Object(a.jsx)("input",{name:"date_start",type:"date",value:p.date_start,onChange:function(e){var t=e.target,n=t.name,a=t.value;b(Object(l.a)(Object(l.a)({},p),{},Object(c.a)({},n,a)))},onBlur:function(){return s(!o)}})]}),Object(a.jsx)("div",{className:"content-body",children:Object(a.jsxs)("div",{className:"content-row",children:[Object(a.jsxs)("div",{className:"content-el",children:["\u041f\u043b\u0430\u043d:",Object(a.jsxs)(f.b,{data:v,width:500,height:400,headerHeight:30,rowHeight:25,children:[Object(a.jsx)(f.a,{dataKey:"id",title:"\u2116 \u043f\u043f",width:60},"id"),Object(a.jsx)(f.a,{dataKey:"date",title:"\u0414\u0430\u0442\u0430",width:100},"date"),Object(a.jsx)(f.a,{dataKey:"jt",title:"\u0416/\u0422",width:100},"jt"),Object(a.jsx)(f.a,{dataKey:"vol_pr",title:"\u041e\u0431\u044a\u0435\u043c \u041f\u0420 (\u043c3)",width:80},"vol_pr"),Object(a.jsx)(f.a,{dataKey:"sod_me_pr",title:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0432 \u041f\u0420 (\u043c\u0433/\u043b)",width:100},"sod_me_pr"),Object(a.jsx)(f.a,{dataKey:"k_izvl",title:"\u041a.\u0438\u0437\u0432\u043b.",width:80},"k_izvl")]})]}),Object(a.jsxs)("div",{className:"content-el",children:["\u0424\u0430\u043a\u0442:",Object(a.jsx)(M,{setEbFact:y})]})]})})]})})]})},G={name:"Test",params:[{date_start:"2021-01-29",me:200,me_calc:200,grm:3e5,grm_calc:3e5,skv_otk:10,skv_otk_deb:9,k_izvl:.85,koeff_year_um_deb:.9,koeff_year_um_skv:.98,sod_me_vr:2,a:2,v:1,d:.2}]};var H=function(){return Object(a.jsx)(R,{nameEb:G.name,paramEb:G.params[0]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root"))}},[[598,1,2]]]);
//# sourceMappingURL=main.73d9c112.chunk.js.map