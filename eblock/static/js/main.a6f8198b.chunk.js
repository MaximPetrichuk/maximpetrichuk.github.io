(this.webpackJsonpeblock=this.webpackJsonpeblock||[]).push([[0],{441:function(e,t,n){},453:function(e,t){},454:function(e,t){},462:function(e,t){},465:function(e,t){},466:function(e,t){},467:function(e,t,n){},598:function(e,t,n){"use strict";n.r(t);var a=n(23),i=n(9),r=n.n(i),c=n(225),s=n.n(c),o=(n(441),n(77)),l=n(106),u=n(6),d=n(600),b=n(273),j=n(274),_=n(279),p=n(604),h=n(272),m=n(606),v=n(408),f=n(143),O=(n(444),n(199)),x=n.n(O),k=n(377),y=n.n(k),g=(n(445),n(378)),N=n.n(g),w=n(72),A=function(e){var t=e.setEbFact,n=Object(i.useState)(null),r=Object(u.a)(n,2),c=r[0],s=r[1],o=HTMLDivElement,l={tableOverflow:!0,data:[["2021-01-29",0,90],["2021-01-30",0,90],["2021-01-31",0,90],["2021-02-01",6.474,89.9],["2021-02-02",47.454,89.9],["2021-02-03",125.048,89.8],["2021-02-04",235.004,89.8],["2021-02-05",355.575,89.8],["2021-02-06",471.726,89.8],["2021-02-07",579.426,89.8],["2021-02-08",669.583,89.7],["2021-02-09",740.288,89.7],["2021-02-10",795.87,89.6],["2021-02-11",838.89,89.6],["2021-02-12",868.6,89.6],["2021-02-13",887.537,89.5],["2021-02-14",898.282,89.5],["2021-02-15",902.16,89.5],["2021-02-16",899.593,89.5],["2021-02-17",897.446,89.5],["2021-02-18",888.444,89.4],["2021-02-19",877.305,89.4],["2021-02-20",866.176,89.3],["2021-02-21",853.312,89.3],["2021-02-22",837.913,89.3],["2021-02-23",824.67,89.3],["2021-02-24",809.676,89.3],["2021-02-25",796.452,89.2],["2021-02-26",781.1,89.2],["2021-02-27",766.12,89.2],["2021-02-28",752.928,89.1],["2021-03-01",739.748,89.1],["2021-03-02",724.443,89],["2021-03-03",713.758,89],["2021-03-04",700.608,89],["2021-03-05",687.47,89],["2021-03-06",676.795,89],["2021-03-07",665.808,88.9],["2021-03-08",654.831,88.9],["2021-03-09",645.996,88.8],["2021-03-10",635.336,88.8],["2021-03-11",626.514,88.8],["2021-03-12",617.7,88.8],["2021-03-13",609.18,88.8],["2021-03-14",600.378,88.7],["2021-03-15",591.584,88.7],["2021-03-16",585.2,88.7],["2021-03-17",578.544,88.6],["2021-03-18",571.894,88.6],["2021-03-19",565.25,88.5],["2021-03-20",558.875,88.5],["2021-03-21",552.24,88.5],["2021-03-22",545.611,88.5],["2021-03-23",541.365,88.5],["2021-03-24",536.866,88.4],["2021-03-25",532.371,88.4],["2021-03-26",526.008,88.4],["2021-03-27",523.64,88.3],["2021-03-28",517.036,88.3],["2021-03-29",514.917,88.3],["2021-03-30",510.438,88.3],["2021-03-31",505.963,88.2],["2021-04-01",503.608,88.2],["2021-04-02",499.376,88.2],["2021-04-03",497.025,88.1],["2021-04-04",492.562,88.1],["2021-04-05",490.448,88.1],["2021-04-06",488.103,88],["2021-04-07",483.648,88],["2021-04-08",481.536,88],["2021-04-09",479.197,88],["2021-04-10",476.86,87.9],["2021-04-11",474.525,87.9],["2021-04-12",472.416,87.9],["2021-04-13",470.084,87.8],["2021-04-14",467.754,87.8],["2021-04-15",465.647,87.8],["2021-04-16",465.426,87.8],["2021-04-17",463.1,87.7],["2021-04-18",460.995,87.7],["2021-04-19",460.776,87.7],["2021-04-20",458.454,87.6],["2021-04-21",456.351,87.6],["2021-04-22",454.032,87.6],["2021-04-23",453.816,87.5],["2021-04-24",453.6,87.5],["2021-04-25",451.5,87.5],["2021-04-26",449.186,87.5],["2021-04-27",448.972,87.4],["2021-04-28",448.972,87.4],["2021-04-29",446.661,87.4],["2021-04-30",446.448,87.3],["2021-05-01",444.352,87.3],["2021-05-02",444.14,87.3],["2021-05-03",443.928,87.3],["2021-05-04",441.834,87.3],["2021-05-05",441.623,87.2],["2021-05-06",441.412,87.2],["2021-05-07",441.412,87.2],["2021-05-08",439.11,87.1],["2021-05-09",438.9,87.1],["2021-05-10",438.69,87],["2021-05-11",438.69,87],["2021-05-12",438.48,87],["2021-05-13",436.183,87],["2021-05-14",436.183,87],["2021-05-15",435.974,86.9],["2021-05-16",435.765,86.9],["2021-05-17",435.765,86.9],["2021-05-18",435.556,86.8],["2021-05-19",433.264,86.8],["2021-05-20",433.264,86.8],["2021-05-21",433.056,86.8],["2021-05-22",432.848,86.7],["2021-05-23",432.848,86.7],["2021-05-24",432.64,86.7],["2021-05-25",432.432,86.6],["2021-05-26",432.224,86.6],["2021-05-27",430.146,86.6],["2021-05-28",432.016,86.5],["2021-05-29",429.732,86.5],["2021-05-30",429.732,86.5],["2021-05-31",429.525,86.5],["2021-06-01",431.392,86.4],["2021-06-02",429.318,86.4],["2021-06-03",429.111,86.4],["2021-06-04",428.904,86.3],["2021-06-05",428.904,86.3],["2021-06-06",428.697,86.3],["2021-06-07",428.49,86.3],["2021-06-08",428.49,86.3],["2021-06-09",428.283,86.2],["2021-06-10",428.076,86.2],["2021-06-11",428.076,86.2],["2021-06-12",427.869,86.1],["2021-06-13",427.662,86.1],["2021-06-14",427.662,86.1],["2021-06-15",427.455,86],["2021-06-16",427.248,86],["2021-06-17",427.248,86],["2021-06-18",427.041,86],["2021-06-19",426.834,85.9],["2021-06-20",426.627,85.9],["2021-06-21",426.627,85.9],["2021-06-22",426.42,85.8],["2021-06-23",426.213,85.8],["2021-06-24",426.213,85.8],["2021-06-25",426.006,85.8],["2021-06-26",425.799,85.7],["2021-06-27",423.742,85.7],["2021-06-28",425.592,85.7],["2021-06-29",425.385,85.6],["2021-06-30",425.385,85.6],["2021-07-01",423.124,85.6],["2021-07-02",424.971,85.5],["2021-07-03",422.918,85.5],["2021-07-04",422.712,85.5],["2021-07-05",422.506,85.5],["2021-07-06",422.506,85.5],["2021-07-07",422.3,85.4],["2021-07-08",422.094,85.4],["2021-07-09",422.094,85.4],["2021-07-10",421.888,85.3],["2021-07-11",421.682,85.3],["2021-07-12",421.682,85.3],["2021-07-13",421.476,85.3],["2021-07-14",421.27,85.2],["2021-07-15",421.27,85.2],["2021-07-16",421.064,85.2],["2021-07-17",420.858,85.1],["2021-07-18",420.858,85.1],["2021-07-19",418.61,85.1],["2021-07-20",420.446,85],["2021-07-21",418.405,85],["2021-07-22",418.2,85],["2021-07-23",417.995,85],["2021-07-24",417.995,85],["2021-07-25",417.79,84.9],["2021-07-26",417.585,84.9],["2021-07-27",417.585,84.9],["2021-07-28",417.38,84.8],["2021-07-29",417.175,84.8],["2021-07-30",415.14,84.8],["2021-07-31",414.936,84.8],["2021-08-01",414.732,84.7],["2021-08-02",414.732,84.7],["2021-08-03",414.528,84.7],["2021-08-04",414.324,84.6],["2021-08-05",414.324,84.6],["2021-08-06",414.12,84.6],["2021-08-07",413.916,84.5],["2021-08-08",411.887,84.5],["2021-08-09",411.684,84.5],["2021-08-10",411.481,84.5],["2021-08-11",411.481,84.5],["2021-08-12",411.278,84.4],["2021-08-13",411.075,84.4],["2021-08-14",409.05,84.4],["2021-08-15",408.848,84.3],["2021-08-16",408.646,84.3],["2021-08-17",408.646,84.3],["2021-08-18",408.444,84.3],["2021-08-19",408.242,84.2],["2021-08-20",406.221,84.2],["2021-08-21",406.02,84.2],["2021-08-22",405.819,84.1],["2021-08-23",405.819,84.1],["2021-08-24",403.6,84.1],["2021-08-25",405.417,84],["2021-08-26",403.4,84],["2021-08-27",403.2,84],["2021-08-28",403,84],["2021-08-29",400.985,84],["2021-08-30",400.786,83.9],["2021-08-31",400.587,83.9],["2021-09-01",400.587,83.9],["2021-09-02",398.376,83.8],["2021-09-03",400.189,83.8],["2021-09-04",398.178,83.8],["2021-09-05",397.98,83.8],["2021-09-06",397.782,83.7],["2021-09-07",395.773,83.7],["2021-09-08",395.576,83.7],["2021-09-09",395.379,83.6],["2021-09-10",393.372,83.6],["2021-09-11",393.176,83.6],["2021-09-12",392.98,83.5],["2021-09-13",392.98,83.5],["2021-09-14",390.78,83.5],["2021-09-15",390.585,83.5],["2021-09-16",390.585,83.5],["2021-09-17",390.39,83.4],["2021-09-18",388.194,83.4],["2021-09-19",388.194,83.4],["2021-09-20",386,83.3],["2021-09-21",385.807,83.3],["2021-09-22",385.807,83.3],["2021-09-23",383.616,83.3],["2021-09-24",383.424,83.2],["2021-09-25",383.424,83.2],["2021-09-26",383.232,83.2],["2021-09-27",381.045,83.1],["2021-09-28",381.045,83.1],["2021-09-29",378.86,83.1],["2021-09-30",378.67,83],["2021-10-01",378.67,83],["2021-10-02",376.488,83],["2021-10-03",376.488,83],["2021-10-04",376.299,83],["2021-10-05",374.12,82.9],["2021-10-06",374.12,82.9],["2021-10-07",373.932,82.9],["2021-10-08",371.756,82.8],["2021-10-09",371.756,82.8],["2021-10-10",369.582,82.8],["2021-10-11",369.396,82.8],["2021-10-12",369.396,82.8],["2021-10-13",367.225,82.7],["2021-10-14",367.04,82.7],["2021-10-15",365.056,82.7],["2021-10-16",364.872,82.6],["2021-10-17",364.688,82.6],["2021-10-18",362.706,82.6],["2021-10-19",362.523,82.5],["2021-10-20",360.36,82.5],["2021-10-21",360.36,82.5],["2021-10-22",360.178,82.5],["2021-10-23",358.018,82.4],["2021-10-24",356.04,82.4],["2021-10-25",355.86,82.4],["2021-10-26",355.86,82.4],["2021-10-27",353.704,82.3],["2021-10-28",353.525,82.3],["2021-10-29",353.525,82.3],["2021-10-30",351.372,82.3],["2021-10-31",349.221,82.2],["2021-11-01",349.221,82.2],["2021-11-02",347.072,82.2],["2021-11-03",346.896,82.1],["2021-11-04",346.896,82.1],["2021-11-05",344.75,82.1],["2021-11-06",344.575,82],["2021-11-07",342.606,82],["2021-11-08",342.432,82],["2021-11-09",340.291,82],["2021-11-10",340.291,82],["2021-11-11",338.152,81.9],["2021-11-12",337.98,81.9],["2021-11-13",336.015,81.9],["2021-11-14",335.844,81.8],["2021-11-15",333.88,81.8],["2021-11-16",333.71,81.8],["2021-11-17",331.578,81.8],["2021-11-18",331.578,81.8],["2021-11-19",329.448,81.7],["2021-11-20",329.28,81.7],["2021-11-21",327.32,81.7],["2021-11-22",327.153,81.6],["2021-11-23",325.028,81.6],["2021-11-24",325.028,81.6],["2021-11-25",322.905,81.5],["2021-11-26",322.74,81.5],["2021-11-27",320.784,81.5],["2021-11-28",320.62,81.5],["2021-11-29",318.665,81.5],["2021-11-30",318.502,81.4],["2021-12-01",316.386,81.4],["2021-12-02",316.386,81.4],["2021-12-03",314.272,81.3],["2021-12-04",314.111,81.3],["2021-12-05",312.16,81.3],["2021-12-06",312,81.3],["2021-12-07",309.891,81.2],["2021-12-08",307.942,81.2],["2021-12-09",307.784,81.2],["2021-12-10",305.679,81.1],["2021-12-11",305.679,81.1],["2021-12-12",303.576,81.1],["2021-12-13",303.576,81.1],["2021-12-14",301.475,81],["2021-12-15",301.32,81],["2021-12-16",299.376,81],["2021-12-17",299.222,81],["2021-12-18",297.126,80.9],["2021-12-19",297.126,80.9],["2021-12-20",295.032,80.9],["2021-12-21",292.94,80.8],["2021-12-22",292.94,80.8],["2021-12-23",290.85,80.8],["2021-12-24",290.85,80.8],["2021-12-25",288.762,80.8],["2021-12-26",288.613,80.7],["2021-12-27",286.676,80.7],["2021-12-28",286.528,80.7],["2021-12-29",284.445,80.6],["2021-12-30",284.445,80.6],["2021-12-31",282.364,80.6],["2022-01-01",280.285,80.5],["2022-01-02",280.285,80.5],["2022-01-03",278.208,80.5],["2022-01-04",278.208,80.5],["2022-01-05",276.133,80.5],["2022-01-06",275.99,80.4],["2022-01-07",274.06,80.4],["2022-01-08",273.918,80.4],["2022-01-09",271.848,80.3],["2022-01-10",269.92,80.3],["2022-01-11",269.78,80.3],["2022-01-12",267.714,80.3],["2022-01-13",267.714,80.3],["2022-01-14",265.65,80.2],["2022-01-15",265.65,80.2],["2022-01-16",263.588,80.2],["2022-01-17",263.451,80.1],["2022-01-18",261.528,80.1],["2022-01-19",261.392,80.1],["2022-01-20",259.335,80],["2022-01-21",257.414,80],["2022-01-22",257.28,80],["2022-01-23",255.36,80],["2022-01-24",255.227,80],["2022-01-25",253.176,79.9],["2022-01-26",253.176,79.9],["2022-01-27",251.127,79.9],["2022-01-28",250.996,79.8],["2022-01-29",249.08,79.8],["2022-01-30",247.035,79.8],["2022-01-31",246.906,79.8],["2022-02-01",244.992,79.8],["2022-02-02",244.864,79.7],["2022-02-03",242.951,79.7],["2022-02-04",242.824,79.7],["2022-02-05",240.786,79.6],["2022-02-06",238.875,79.6],["2022-02-07",238.75,79.6],["2022-02-08",236.716,79.5],["2022-02-09",236.716,79.5],["2022-02-10",234.684,79.5],["2022-02-11",234.684,79.5],["2022-02-12",232.654,79.5]],columns:[{type:"text",width:"80",name:"date",title:"\u0414\u0430\u0442\u0430"},{type:"number",width:"150",name:"vol_pr",title:"\u0421\u0443\u0442.\u0434\u043e\u0431\u044b\u0447\u0430 (\u043a\u0433)"},{type:"number",width:"200",name:"me_final",title:"\u0421\u0440\u0435\u0434\u043d.\u0441\u0443\u0442.\u0434\u0435\u0431\u0438\u0442 (\u043c3/\u0447)"}]};Object(i.useEffect)((function(){s(N()(o,l))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{ref:function(e){return o=e}}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"button",onClick:function(){x.a.extend(y.a),t(c.getData().map((function(e){return{date:x()(e[0],x()(e[0],"DD.MM.YYYY").isValid()?"DD.MM.YYYY":"YYYY-MM-DD").format("YYYY-MM-DD"),vol_pr:24*(isNaN(e[2])?parseFloat(e[2].replace(",",".").replace(" ","")):Number(e[2])),me_final:isNaN(e[1])?parseFloat(e[1].replace(",",".").replace(" ","")):Number(e[1])}})))},value:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0430\u043a\u0442"}),Object(a.jsx)("input",{type:"button",onClick:function(){c.setData([[],[],[],[],[],[],[],[],[],[],[],[]])},value:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443"})]}),Object(a.jsx)("p",{children:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u044f\u0447\u0435\u0439\u043a\u0443 \u0438 \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e CTRL-V."})]})},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",i=[],r=x()(t),c=1e3*e.me_calc/e.grm_calc,s=1e3*e.me,o=0,l=e.skv_otk,u=e.skv_otk_deb,d=0,b=0,j=0,_=0,p=0;do{var h={id:o+1,date:r.add(o,a).format("YYYY-MM-DD"),days:1,hours:24,vol_pr:0,vol_pr_nakop:0,jt:0,kg_t_grm_nakop:0,sod_me_pr:0,me_pr:0,me_pr_nakop:0,me_vr:0,me_final:0,me_final_nakop:0,k_izvl:0,vol_pr_f:null,sod_me_pr_f:null,me_pr_f:null,me_pr_nakop_f:null,me_vr_f:null,me_final_f:null,me_final_nakop_f:null,k_izvl_f:null,me_final_for_chart:null};if(h.skv_otk=l,h.skv_otk_deb=u,o<=n.length-1?(h.date=n[o].date,h.vol_pr=n[o].vol_pr,h.vol_pr_f=n[o].vol_pr,h.me_final_f=n[o].me_final,h.me_final_nakop_f=_+h.me_final_f,h.k_izvl_f=w.round(h.me_final_nakop_f/s,4)):h.vol_pr=w.round(h.hours*h.skv_otk*h.skv_otk_deb),h.vol_pr>0){if(h.vol_pr_nakop=d+h.vol_pr,h.jt=w.round(h.vol_pr_nakop/e.grm,5),h.kg_t_grm_nakop=c/(1+e.a*Math.exp(-e.v*(h.jt-e.d/h.jt))),h.me_final=w.round((h.kg_t_grm_nakop-b)*e.grm,3),h.me_final_nakop=j+h.me_final,h.k_izvl=w.round(h.me_final_nakop/s,4),h.k_izvl>e.k_izvl){var m=h.k_izvl-e.k_izvl;h.k_izvl=e.k_izvl,h.me_final=s*h.k_izvl-j,h.me_final_nakop=j+h.me_final,h.vol_pr=w.round(h.vol_pr-h.vol_pr*m),h.vol_pr_nakop=d+h.vol_pr,h.jt=w.round(h.vol_pr_nakop/e.grm,3)}}else h.vol_pr_nakop=d,h.kg_t_grm_nakop=b,h.me_final_nakop=j,h.k_izvl=w.round(h.me_final_nakop/s,4);h.me_final_for_chart=w.max([h.me_final,h.me_final_f]),l-=l*(1-e.koeff_year_um_skv)/365,u-=u*(1-e.koeff_year_um_deb)/365,d=h.vol_pr_nakop,b=h.kg_t_grm_nakop,j=h.me_final_nakop,_=h.me_final_nakop_f,p=h.k_izvl,i.push(h),o++}while((p<e.k_izvl||o<=n.length-1)&&o<1200);return i},C=n(3),z=n.n(C),E=n(13),Y=n(5),M=n(11),D=n(14),K=n(15),I=n(70),V=n(21),T=new(function(e){Object(D.a)(n,e);var t=Object(K.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Object(Y.a)(this,n),(e=t.call(this)).f=function(t){return I.d((function(){var n=e.me_calc.mul(1e3).div(e.grm_calc.mul(1e5)),a=t.div(e.grm_calc.mul(1e5)),i=e.v.mul(100).mul(a.sub(e.d.div(a))).mul(-1).exp();return n.div(e.constOne.add(e.a.mul(100).mul(i))).div(e.C)}))},e.maxEpochPerTrainSession=a,e.learningRate=i,e.expectedLoss=r,e.optimizerFunction=I.e.adam,e}return Object(M.a)(n,[{key:"initModelVariables",value:function(e,t,n,a,i,r,c){this.a=I.b(i/100).variable(),this.v=I.b(r/100).variable(),this.d=I.b(c).variable(),this.me=I.b(e),this.me_calc=I.b(t/1e3),this.grm=I.b(n),this.grm_calc=I.b(a/1e5),this.C=I.b(e/n),this.constOne=I.b(1)}},{key:"predict",value:function(e,t){var n=I.c(e);return this.f(n).arraySync().map((function(n,a){return{date:a,vol:e[a],k_izvl_et:t[a],k_izvl_calc:n}}))}},{key:"predictAvd",value:function(){return{a:100*this.a.dataSync()[0],v:100*this.v.dataSync()[0],d:this.d.dataSync()[0],me_calc:1e3*this.me_calc.dataSync()[0],grm_calc:1e5*this.grm_calc.dataSync()[0]}}}]),n}(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.e.sgd,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;Object(Y.a)(this,e),this.loss=function(e,n){var a=e.sub(n).abs().square().mean();return t.lossVal=a.dataSync()[0],a},this.optimizerFunction=n,this.expectedLoss=r,this.learningRate=i,this.maxEpochPerTrainSession=a,this.trainSession=0,this.epochNumber=0,this.history=[]}return Object(M.a)(e,[{key:"initModelVariables",value:function(){throw Error("Model variables should be defined")}},{key:"f",value:function(){throw Error("Model should be defined")}},{key:"train",value:function(){var e=Object(E.a)(z.a.mark((function e(t,n){var a,i,r,c,s,o,l=this,u=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=u.length>2&&void 0!==u[2]?u[2]:"",i=u.length>3?u[3]:void 0,r=++this.trainSession,this.lossVal=Number.POSITIVE_INFINITY,this.epochNumber=0,this.history=[],c=I.c(t),s=I.c(n),o=this.optimizerFunction(this.learningRate);case 9:if(!(r===this.trainSession&&this.lossVal>this.expectedLoss&&this.epochNumber<=this.maxEpochPerTrainSession)){e.next=20;break}return-1!==a.indexOf("avd")&&o.minimize((function(){return l.loss(l.f(c),s)}),!1,[this.a,this.v,this.d]),-1!==a.indexOf("dmg")&&o.minimize((function(){return l.loss(l.f(c),s)}),!1,[this.me_calc,this.grm_calc]),this.history=[].concat(Object(V.a)(this.history),[{epoch:this.epochNumber,loss:this.lossVal}]),isNaN(this.lossVal)&&(this.learningRate=.1*this.learningRate,o=this.optimizerFunction(this.learningRate)),i&&i(),this.epochNumber++,e.next=18,I.a();case 18:e.next=9;break;case 20:c.dispose();case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.trainSession++}},{key:"predict",value:function(e){var t=I.c(e);return this.f(t).arraySync().map((function(t,n){return{x:e[n],y:t}}))}}]),e}()))(250,.01,1e-7),B=12.5;function F(){return(F=Object(E.a)(z.a.mark((function e(t,n,a,i){var r,c,s,o,l,u,d,b,j,_=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=_.length>4&&void 0!==_[4]?_[4]:"avd",c=_.length>5&&void 0!==_[5]?_[5]:.01,o=P(s=t,n),l=o.map((function(e){return e.vol_pr_nakop})),u=o.map((function(e){return e.ki})),T.learningRate=c,d=s.a>=0&&s.a<=10?s.a:0,b=s.v>=0&&s.v<=10?s.v:0,j=s.d>=0&&s.d<=3?s.d:0,T.initModelVariables(s.me,s.me_calc,s.grm,s.grm_calc,d,b,j),e.t0=c,e.next=.01===e.t0?14:.001===e.t0?17:20;break;case 14:return T.maxEpochPerTrainSession=250,B=T.maxEpochPerTrainSession/20,e.abrupt("break",21);case 17:return T.maxEpochPerTrainSession=1e3,B=T.maxEpochPerTrainSession/20,e.abrupt("break",21);case 20:T.maxEpochPerTrainSession=250;case 21:T.train(l,u,r,(function(){T.epochNumber%B===0&&i({prc:parseInt(T.epochNumber/T.maxEpochPerTrainSession*100),message:" \u043e\u0442\u043a\u043b: ".concat(T.history[T.history.length-1].loss.toFixed(7))})})).then((function(){i({prc:0,message:""});var e=T.predictAvd();a({a:w.round(e.a,4),v:w.round(e.v,4),d:w.round(e.d,4),me_calc:w.round(e.me_calc),grm_calc:w.round(e.grm_calc)})}));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){for(var n=[],a=0,i=0,r=0,c=0,s=0;s<t.length;s++)a+=t[s].vol_pr,i+=t[s].me_final,r=a/e.grm,c=i/(1e3*e.me),r>.05&&n.push({vol_pr_nakop:a,ki:c});return n}n(467);var R=function(e){var t=e.data,n=Object(i.useRef)(),r=Object(i.useState)({width:0,height:0}),c=Object(u.a)(r,2),s=c[0],o=c[1];return Object(i.useLayoutEffect)((function(){n.current&&o({width:n.current.offsetWidth,height:n.current.offsetHeight})}),[]),Object(a.jsxs)("div",{className:"content-charts",ref:n,children:[Object(a.jsxs)(d.a,{width:s.width-40,height:300,data:t,margin:{top:5,right:10,left:10,bottom:0},children:[Object(a.jsx)(b.a,{dataKey:"date"}),Object(a.jsx)(j.a,{dataKey:"me_final_for_chart",label:{value:"\u0421\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u0434\u043e\u0431\u044b\u0447\u0430 (\u043a\u0433)",angle:-90,position:"insideLeft"},yAxisId:0}),Object(a.jsx)(j.a,{dataKey:"k_izvl",label:{value:"\u041a.\u0438\u0437\u0432\u043b",angle:-90,position:"insideRight"},yAxisId:1,orientation:"right"}),Object(a.jsx)(_.a,{isAnimationActive:!1}),Object(a.jsx)(p.a,{strokeDasharray:"3 3"}),Object(a.jsx)(h.a,{type:"linear",dataKey:"me_final",title:"\u0421\u0443\u0442.\u0434\u043e\u0431.\u043f\u043b\u0430\u043d",stroke:"blue",yAxisId:0,isAnimationActive:!1,dot:!1}),Object(a.jsx)(h.a,{type:"linear",dataKey:"k_izvl",title:"\u041a.\u0438\u0437\u0432\u043b \u043f\u043b\u0430\u043d",stroke:"purple",yAxisId:1,isAnimationActive:!1,dot:!1}),Object(a.jsx)(h.a,{type:"linear",dataKey:"k_izvl_f",title:"\u041a.\u0438\u0437\u0432\u043b \u0444\u0430\u043a\u0442",stroke:"#387908",yAxisId:1,isAnimationActive:!1,dot:!1}),Object(a.jsx)(h.a,{type:"linear",dataKey:"me_final_f",title:"\u0421\u0443\u0442.\u0434\u043e\u0431.\u0444\u0430\u043a\u0442",stroke:"red",yAxisId:0,isAnimationActive:!1,dot:!1})]}),Object(a.jsxs)(m.a,{width:s.width-40,height:100,data:t,margin:{top:0,right:10,left:10,bottom:5},children:[Object(a.jsxs)("defs",{children:[Object(a.jsxs)("linearGradient",{id:"colorP",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(a.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(a.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),Object(a.jsxs)("linearGradient",{id:"colorF",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(a.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),Object(a.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),Object(a.jsx)(b.a,{dataKey:"date",hide:"true"}),Object(a.jsx)(j.a,{dataKey:"vol_pr",label:{value:"\u041f\u0420 (\u043c3)",angle:-90,position:"insideLeft"},yAxisId:0}),Object(a.jsx)(j.a,{dataKey:"vol_pr",label:{value:"\u041f\u0420 (\u043c3)",angle:-90,position:"insideRight"},yAxisId:1,orientation:"right"}),Object(a.jsx)(_.a,{isAnimationActive:!1}),Object(a.jsx)(p.a,{strokeDasharray:"3 3"}),Object(a.jsx)(v.a,{type:"linear",dataKey:"vol_pr",yAxisId:0,stroke:"#8884d8",fillOpacity:1,fill:"url(#colorP)",isAnimationActive:!1,dot:!1}),Object(a.jsx)(v.a,{type:"linear",dataKey:"vol_pr_f",yAxisId:0,stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorF)",isAnimationActive:!1,dot:!1})]})]})},L=function(e){e.nameEb;var t=e.paramEb,n=Object(i.useState)(!0),r=Object(u.a)(n,2),c=r[0],s=r[1],d=Object(i.useState)(t),b=Object(u.a)(d,2),j=b[0],_=b[1],p=Object(i.useState)([]),h=Object(u.a)(p,2),m=h[0],v=h[1],O=Object(i.useState)([]),x=Object(u.a)(O,2),k=x[0],y=x[1],g=Object(i.useState)(.01),N=Object(u.a)(g,2),w=N[0],C=N[1],z=Object(i.useState)({prc:0,message:""}),E=Object(u.a)(z,2),Y=E[0],M=E[1],D=function(e){k.length>0?function(e,t,n,a){F.apply(this,arguments)}(j,k,K,M,e,w):alert("\u0414\u043b\u044f \u043f\u043e\u0434\u0431\u043e\u0440\u0430 AVd \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0444\u0430\u043a\u0442\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 <\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0430\u043a\u0442>!")},K=function(e){isNaN(e.a)||isNaN(e.v)||isNaN(e.d)?alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 AVd, \u0443\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440\u0430!"):(_(Object(l.a)(Object(l.a)({},j),{},{a:e.a,v:e.v,d:e.d,me_calc:e.me_calc,grm_calc:e.grm_calc})),s(!c))},I=function(e){var t,n=e.target,a="checkbox"===n.type?n.checked:n.value,i=n.name;"me"!==i&&"grm"!==i?_(Object(l.a)(Object(l.a)({},j),{},Object(o.a)({},i,Number(a)))):_(Object(l.a)(Object(l.a)({},j),{},(t={},Object(o.a)(t,i,Number(a)),Object(o.a)(t,i+"_calc",Number(a)),t)))},V=function(e,t){var n=j[e]+t;n=Number(n.toFixed(5).replace(/0*$/,"").replace(/\.$/,".0")),_(Object(l.a)(Object(l.a)({},j),{},Object(o.a)({},e,n))),s(!c)};return Object(i.useEffect)((function(){var e=S(j,j.date_start,k);v(e)}),[c,k]),Object(a.jsxs)("div",{className:"content-flex",children:[Object(a.jsxs)("div",{className:"content-header",children:[Object(a.jsx)("h3",{children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0443\u0442\u043e\u0447\u043d\u043e\u0439 \u0434\u043e\u0431\u044b\u0447\u0438 (\u0434\u0435\u043c\u043e)."}),Object(a.jsx)(R,{data:m})]}),Object(a.jsxs)("div",{className:"content-body",children:[Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"A:"}),Object(a.jsx)("input",{name:"a",type:"number",value:j.a,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("a",-.1)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("a",.1)},children:"+"})]}),Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"V:"}),Object(a.jsx)("input",{name:"v",type:"number",value:j.v,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("v",-.01)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("v",.01)},children:"+"})]}),Object(a.jsxs)("div",{className:"btnUpDownGroup",children:[Object(a.jsx)("label",{children:"d:"}),Object(a.jsx)("input",{name:"d",type:"number",value:j.d,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("d",-.01)},children:"-"}),Object(a.jsx)("button",{type:"button",onClick:function(){return V("d",.01)},children:"+"})]}),Object(a.jsx)("span",{hidden:0!==Y.prc,children:Object(a.jsx)("button",{type:"button",onClick:function(){return D("avd")},children:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c AVd"})}),Object(a.jsxs)("span",{hidden:0!==Y.prc,children:[Object(a.jsx)("label",{children:"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c:"}),Object(a.jsx)("button",{type:"button",onClick:function(){return C(10*w)},children:"-"}),w,Object(a.jsx)("button",{type:"button",onClick:function(){return C(w/10)},children:"+"})]}),Object(a.jsx)("span",{hidden:0===Y.prc,children:Object(a.jsx)("button",{type:"button",onClick:function(){T&&T.stop()},children:"\u041f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440"})}),Object(a.jsx)("span",{hidden:0===Y.prc,children:Object(a.jsx)("div",{className:"progressbar",children:Object(a.jsxs)("div",{style:{width:Y.prc.toString()+"%"},children:[Y.prc,"% ",Y.message]})})})]}),Object(a.jsx)("div",{className:"content-h100",children:Object(a.jsxs)("div",{className:"content-layout",children:[Object(a.jsxs)("div",{className:"content-sidebar",children:[Object(a.jsx)("label",{children:"\u0417\u0430\u043f\u0430\u0441\u044b \u0442"}),Object(a.jsx)("input",{name:"me",type:"number",step:"1",value:j.me,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0413\u0420\u041c \u0442"}),Object(a.jsx)("input",{name:"grm",type:"number",step:"1",value:j.grm,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u041e\u0442\u043a.\u0441\u043a\u0432.\u0448\u0442"}),Object(a.jsx)("input",{name:"skv_otk",type:"number",step:"1",value:j.skv_otk,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0414\u0435\u0431\u0438\u0442 \u043e\u0442\u043a.\u0441\u043a\u0432 \u043c3/\u0447"}),Object(a.jsx)("input",{name:"skv_otk_deb",type:"number",step:"0.1",value:j.skv_otk_deb,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u041f\u043b\u0430\u043d\u043e\u0432\u044b\u0439 \u041a\u043e\u044d\u0444\u0444.\u0438\u0437\u0432\u043b."}),Object(a.jsx)("input",{name:"k_izvl",type:"number",step:"0.1",value:j.k_izvl,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0415\u0436\u0435\u0433\u043e\u0434\u043d.\u043a\u043e\u044d\u0444\u0444.\u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u0434\u0435\u0431\u0438\u0442\u0430."}),Object(a.jsx)("input",{name:"koeff_year_um_deb",type:"number",step:"0.1",value:j.koeff_year_um_deb,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0415\u0436\u0435\u0433\u043e\u0434\u043d.\u043a\u043e\u044d\u0444\u0444.\u0443\u043c\u0435\u043d\u044c\u0448.\u043a\u043e\u043b-\u0432\u0430 \u0441\u043a\u0432."}),Object(a.jsx)("input",{name:"koeff_year_um_skv",type:"number",step:"0.1",value:j.koeff_year_um_skv,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0421\u0440\u0435\u0434\u043d.\u0441\u043e\u0434\u0435\u0440\u0436.Me \u0432 \u0412\u0420 (\u043c\u0433/\u043b)"}),Object(a.jsx)("input",{name:"sod_me_vr",type:"number",step:"0.1",value:j.sod_me_vr,onChange:I,onBlur:function(){return s(!c)}}),Object(a.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0431\u043b\u043e\u043a\u0430"}),Object(a.jsx)("input",{name:"date_start",type:"date",value:j.date_start,onChange:function(e){var t=e.target,n=t.name,a=t.value;_(Object(l.a)(Object(l.a)({},j),{},Object(o.a)({},n,a)))},onBlur:function(){return s(!c)}})]}),Object(a.jsx)("div",{className:"content-body",children:Object(a.jsxs)("div",{className:"content-row",children:[Object(a.jsxs)("div",{className:"content-el",children:["\u041f\u043b\u0430\u043d:",Object(a.jsxs)(f.b,{data:m,width:500,height:400,headerHeight:30,rowHeight:25,children:[Object(a.jsx)(f.a,{dataKey:"id",title:"\u2116 \u043f\u043f",width:60},"id"),Object(a.jsx)(f.a,{dataKey:"date",title:"\u0414\u0430\u0442\u0430",width:100},"date"),Object(a.jsx)(f.a,{dataKey:"jt",title:"\u0416/\u0422",width:100},"jt"),Object(a.jsx)(f.a,{dataKey:"vol_pr",title:"\u041e\u0431\u044a\u0435\u043c \u041f\u0420 (\u043c3)",width:80},"vol_pr"),Object(a.jsx)(f.a,{dataKey:"me_final",title:"\u0421\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u0434\u043e\u0431\u044b\u0447\u0430 (\u043a\u0433)",width:100},"me_final"),Object(a.jsx)(f.a,{dataKey:"k_izvl",title:"\u041a.\u0438\u0437\u0432\u043b.",width:80},"k_izvl")]})]}),Object(a.jsxs)("div",{className:"content-el",children:["\u0424\u0430\u043a\u0442:",Object(a.jsx)(A,{setEbFact:y})]})]})})]})})]})},G={name:"Test",params:[{date_start:"2021-01-29",me:200,me_calc:200,grm:3e5,grm_calc:3e5,skv_otk:10,skv_otk_deb:9,k_izvl:.85,koeff_year_um_deb:.9,koeff_year_um_skv:.98,sod_me_vr:2,a:2,v:1,d:.2}]};var H=function(){return Object(a.jsx)(L,{nameEb:G.name,paramEb:G.params[0]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root"))}},[[598,1,2]]]);
//# sourceMappingURL=main.a6f8198b.chunk.js.map